<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function getMemberList(){
	if(window.ActiveXObject){
		xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}else{
		xhr = new XMLHttpRequest();
	}
	xhr.open("POST","/javascript_class/json",true);
	xhr.onreadystatechange = callback;
	xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
	xhr.send("cmd=getMemberList");
}
function callback(){
	function callback(){
		if(xhr.readyState == 4){
			if(xhr.status == 200){
				var txt = xhr.responseText;
					//넘어온 값이 text 이기때문에 JSON으로 변경해줌.
					var lines = JSON.parse(txt);
					var line = document.getElementById("lines");
					//현재 남아있는 노드들 삭제.
					while(line.hasChildNodes()){
						line.removeChild(line.firstChild);
					}
					line[0]=new Option("호선을 선택하세요");
					//제일 위의 옵션을 제외하고 배열대로 옵션 설정.
					for(var i = 0; i< lines.length;i++){
						line[i+1]=new Option(lines[i]);
					}
			}else{
				alert("문제 발생!"+xhr.stautus);
			}
		}	
	}
	
}

</script>
<style type="text/css">
table {
	width:600px;
	border-collapse: collapse;
}
table, td{
	border: 1px solid black;
}
</style>
</head>
<body>
<table >
	<thead>
		<tr>
			<td width="70">ID</td>
			<td width="230">이름</td>
			<td width="200">이메일</td>
			<td width="100">마일리지</td>
		</tr>
	</thead>
	<tbody id="tbody"></tbody>
</table>
<p>
<button onclick="getMemberList();">회원정보 조회</button>
</body>
</html>