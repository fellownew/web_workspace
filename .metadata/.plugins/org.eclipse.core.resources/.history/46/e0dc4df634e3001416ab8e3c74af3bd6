<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript">
function getSubway(){
	if(window.ActiveXObject){
		xhr = new ActiveXObject("Microsoft.XMLHTTP");
	}else{
		xhr = new XMLHttpRequest();
	}
	xhr.open("POST","/javascript_class/json",true);
	xhr.onreadystatechange = callback;
	xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
	var city = document.getElementById("city").value;
	xhr.send("cmd=subwayLine&city="+city);
}

function callback(){
	if(xhr.readyState == 4){
		if(xhr.status == 200){
			var txt = xhr.responseText;
				//넘어온 값이 text 이기때문에 JSON으로 변경해줌.
				var lines = JSON.parse(txt);
				var line = document.getElementById("lines");
				//현재 남아있는 노드들 삭제.
				while(line.hasChildNodes()){
					line.removeChild(line.firstChild);
				}
				line[0]=new Option("호선을 선택하세요");
				//제일 위의 옵션을 제외하고 배열대로 옵션 설정.
				for(var i = 0; i< lines.length;i++){
					line[i+1]=new Option(lines[i]);
				}
		}else{
			alert("문제 발생!"+xhr.stautus);
		}
	}	
}
function getImage(){
	if(){
		
	}else if(){
		
	}else if(){
		
	}else if(){
		
	}
}

</script>
</head>
<body>
<select name="city" id="city" onchange="getSubway();">
	<option>도시선택</option>
	<option value="seoul">서울</option>
	<option value="busan">부산</option>
	<option value="kwangju">광주</option>
	<option value="daegu">대구</option>
</select>
<select name="lines" id="lines" onchange="getImage();"><option>호선을 선택하세요</option></select>
<p id="image"></p>
</body>
</html>